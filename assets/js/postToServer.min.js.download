function Logger(){this.enabled=!1;this.setEnabled=function(a){this.enabled=a};this.log=function(a){this._log("log",arguments)};this.debug=function(a){this._log("debug",arguments)};this._log=function(a,b){if(this.enabled){var c=this._addPrefixToArguments(b);try{this._writeToConsole(a,c)}catch(d){}}};this._writeToConsole=function(a,b){var c="log";void 0!==console[a]&&(c=a);console[c].apply(console,b)};this._addPrefixToArguments=function(a){a=this._convertArgumentsToArray(a);a.unshift("postToServer (origin: "+
location.origin+"):");return a};this._convertArgumentsToArray=function(a){return Array.prototype.slice.call(a)}};var PersistentStorage=function(){function a(){if("undefined"==typeof k){var a=(new Date((new Date).getTime()+316224E5)).toUTCString(),b="inqPc="+(Math.floor(9E6*Math.random())+1E6).toString(16),c=-1!==window.location.href.indexOf(l)?"domain="+l+";":"";logger.debug("Writing cookie inqPc to check if cookies are supported");document.cookie=b+"; SameSite=None; Secure; path=/; expires="+a+";"+c;k=-1!==document.cookie.indexOf(b);document.cookie="inqPc=; SameSite=None; Secure; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT; "+
c;logger.debug("Deleting cookie inqPc. cookiesEnabled: "+k)}return k}function b(a){var b=localStorage;a=a||"localStorage";"sessionStorage"==a&&(b=sessionStorage);var c={setValue:function(c,d,f){function e(c,d){b.setItem(c,d);var f=b.getItem(c);d.toString()!==f&&logger.debug(a+": Expected "+c+" to equal "+d+", but instead received: "+f)}logger.debug(a+": setValue("+c+", "+decodeURIComponent(d)+", "+f+")");e("LSCACHE-"+c,f);e(c,d)}};return{getAllCookies:function(c){var d="",f,e;try{for(var g in b)b.hasOwnProperty(g)&&
0!==g.indexOf("LSCACHE-")&&(f=this.getItem(g),0===g.indexOf("inqCA")&&(e=sessionStorage.getItem("sinqCA"),logger.debug("sessionStorage: getAllCookies() sessionCA: "+e),!isNaN(e)&&0<e&&(f=0)),d+=""+g+"="+f+";")}catch(h){logger.log("ERROR: Storage is not available. Can't get all data.")}logger.debug(a+": getAllCookies() returns: "+decodeURIComponent(d));c&&c(d);return d},get:function(c){var d={};try{for(var f in b)b.hasOwnProperty(f)&&0!==f.indexOf("LSCACHE-")&&(d[f]=b.getItem(f))}catch(e){logger.log("ERROR: Storage is not available. Can't get item for Safari.")}logger.debug(a+
": get() returns: "+JSON.stringify(d));c&&c(d);return d},getItem:function(c,d){var f=new Date;try{var e=b.getItem("LSCACHE-"+c);if(null!==e&&"session"!==e&&(e=parseInt(e,10),!isNaN(e)&&e<f.getTime()))return logger.debug(a+": expired and call removeItem("+c+")"),this.removeItem("LSCACHE-"+c),this.removeItem(c),d&&d(null),null;var g=b.getItem(c);logger.debug(a+": getItem("+c+") returns: "+decodeURIComponent(g));d&&d(g);return g}catch(h){logger.log("ERROR: Storage is not available. Can't get item.")}},
setItem:function(a,b,d,f,e){if("string"!==typeof a)throw new TypeError("key must be of type 'string'");if("undefined"!==typeof d&&""!==d){f=new Date;var g=parseInt(d,10);isNaN(g)?(d=Date.parse(d),isNaN(d)?logger.log("ERROR: PersistentStorage.cookieInstance: lifetime has to be a number or a date string"):d>f.getTime()?c.setValue(a,b,d):this.removeItem(a)):0<g?c.setValue(a,b,f.getTime()+g):this.removeItem(a)}else c.setValue(a,b,"session");e&&e()},removeItem:function(c,d){try{var f=function(c){b.removeItem(c);
var d=b.getItem(c);null!==d&&logger.log(a+": removeItem(): Expected "+c+" to equal null, but instead received: "+d)};logger.debug(a+": removeItem("+c+")");f("LSCACHE-"+c);f(c);d&&d()}catch(e){logger.log("ERROR: Storage is not available. Can't remove item.")}},clear:function(a){try{logger.debug("LOCALSTORAGE: clear()"),b.clear(),a&&a()}catch(c){logger.log("ERROR: Storage is not available. Can't clear.")}},cleanNuanceCookies:function(){},onUnload:function(c){var d=(new Date).getTime()+6E5;logger.debug(a+
": setSessionStorageTimeout(): SESSION_TIMEOUT="+d+"");for(var f in localStorage)0===f.indexOf("LSCACHE-")&&"session"===localStorage.getItem(f)&&b.setItem(f,d);c&&c()},version:"localStorage.0.0.3"}}function c(){return{getAllCookies:function(a){var b=document.cookie;logger.debug("getAllCookies(): "+b);a&&a(b);return b},get:function(a){var b=this.getAllCookies(),c=null;if(""!==b)for(var c={},b=b.split(";"),d=0;d<b.length;d++){var f=b[d],f=f.replace(/^\s+|\s+$/g,""),f=f.split("=");c[f[0]]=f[1]}a&&a(c);
logger.debug("cookie get(): "+JSON.stringify(c));return c},getItem:function(a,b){var c=this.get(),d=null;null!==c&&(d=c[a]);b&&b(d);logger.debug("cookie getItem(): "+a+"="+d);return d},setItem:function(a,b,c,d,f){var e="";if("undefined"===typeof c||""===c)e="";else if(e=parseInt(c,10),isNaN(e)){e=Date.parse(c);if(isNaN(e)){logger.log("ERROR: PersistentStorage.cookieInstance: days has to be a number or a date string");return}e=";expires="+c}else 0<e?(c=new Date,c.setTime(c.getTime()+e),e=";expires="+
c.toUTCString()):e=";expires=Thu, 01 Jan 1970 00:00:01 GMT";d=d&&("boolean"===typeof d||"string"===typeof d&&"true"===d.toLowerCase())?" secure;":"";a=a+"="+b+e+"; "+d+" SameSite=None; path=/"+(-1!=window.location.href.indexOf(l)?";domain="+l:"");this._setDocumentCookie(a);logger.debug("cookie setItem(): "+a);f&&f()},removeItem:function(a,b){logger.debug("cookie removeItem(): "+a);this.setItem(a,"",-1,null,b)},clear:function(a){logger.debug("cookie clear()");var b=this.get();if(null!==b)for(var b=
Object.keys(b),c=0;c<b.length;c++)this.removeItem(b[c]);a&&a()},onUnload:function(a){a&&a()},cleanNuanceCookies:function(){var a=this.get();if(null!==a)for(var a=Object.keys(a),b=0;b<a.length;b++){var c=a[b];/(inq|tc)[^_]*_\d*/.test(c)&&this.removeItem(c)}},_setDocumentCookie:function(a){document.cookie=a},version:"cookie.0.0.3"}}var d,e,f,g,h=null,k,m=null,l;return{setRootDomain:function(a){l=a},getInstance:function(k){if("localStorage"==k)return f||(f=b("localStorage")),f;if("sessionStorage"==k)return g||
(g=b("sessionStorage")),g;if("cookie"==k)return e||(e=c()),e;if(!d){k=a()?c().getItem("PSConfiguration"):!1;logger.debug("Persistent storage configuration: "+k);if(!k||"localStorage"!==k&&"cookie"!==k){k=!1;var l=window.location.href;try{window.localStorage&&-1!=l.indexOf("clientHosted=true")&&(localStorage.setItem("inqPc",2),k=!0,logger.debug("Testing localStorage, inqPc=2 has been set"))}catch(n){logger.log("WARNING window.localStorage is not supported and chat may not be offered. "+n.message)}logger.debug("isClientHostedLS: "+
k+".");if(k)h="localStorage";else if(a())h="cookie";else{k=!1;if(/firefox/i.test(window.navigator.userAgent))try{window.localStorage&&(localStorage.setItem("inqPc",2),k=!0,logger.debug("Testing localStorage, inqPc=2 has been set"))}catch(n){logger.log("WARNING window.localStorage is not supported and chat may not be offered. "+n.message)}logger.debug("isLSSupported: "+k);k?h="localStorage":(null==m&&(m=a()||""===document.cookie?!1:!0),logger.debug("isCookieReadOnlyEnabled: "+m),m&&(h="cookie"))}}else h=
k;d="cookie"===h?c():"localStorage"===h?b():null}return d},isLocalStorageUsed:function(){return d&&"localStorage"===h},_testHook:{getCookieInstance:c,getLocalStorageInstance:b}}}();var hasStringSupport=!1,previousCommand="",xHRsInProgress={},xhrTimeoutController={},caUnloadController,beaconUnloadController,targetOrigin,trustedDomain,COOKIE_COBROWSE="cobrowse",logger=new Logger;function simpleChatPost(a){var b=a.indexOf("?");if(-1!=b){var c=a.substring(0,b);a=a.substring(b+1);b=getXMLHttpRequest();b.open("POST",c,!0);b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.send(a)}}
function doCommandsInClientDomain(a,b,c){b=[];"string"==typeof a?(b[0]=c,b[1]=a):b=a;hasStringSupport?parent.postMessage(convertArrToString(b),targetOrigin):parent.postMessage(b,targetOrigin);logger.debug("posted cross-window message: ",{command:b,targetOrigin:targetOrigin})}function convertArrToString(a){for(var b=0;b<a.length;b++)a[b]=encodeURIComponent(a[b]);return a.join("||")}
function assignCookieRootDomains(a){if(a){a=a.split(",");for(var b=0;b<a.length;b++)if(-1!==window.location.href.indexOf(a[b])){PersistentStorage.setRootDomain(a[b]);break}}}function _executeCommandFromItems(a){if(a&&0<a.length)try{if(checkDataForSimplePost(a))simpleChatPost(a[0]);else try{doCommands(a)}catch(b){handleError(a[1],b)}}catch(b){window.console&&window.console.error(b.message)}}
function validateDomain(a,b){var c=getLocation().pathname;if(0===c.indexOf("/chatrouter")||0===c.indexOf("/cobrowse"))b(!0,a);else{var d;if(window.v3Lander){if("function"===typeof getV3LanderConfigProperty&&(d=getV3LanderConfigProperty("vanityDomain",v3Lander.vanityDomain)),!d){b(!0,a);return}}else d="https://"+getLocation().host;var e=getXMLHttpRequest(),c="origin="+encodeURIComponent(a);e.open("POST",d+"/tagserver/init/isTrustedDomain");e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
e.onreadystatechange=function(){4===e.readyState&&(406===e.status?b(!1):b(!0,a))};e.send(c)}}function handleError(a,b){doCommandsInClientDomain({id:a,error:b},null,a)}function checkDataForSimplePost(a){return/(^HTTP[s]?:).*/ig.test(a)}
function whenLoaded(){if(-1!==location.search.indexOf("?CLEAR"))clearAllData();else try{window.addEventListener?window.addEventListener("message",whenPosted,!1):window.attachEvent?window.attachEvent("onmessage",whenPosted):window.onmessage=whenPosted}catch(a){window.console&&window.console.log(a.message)}}
function whenPosted(a){function b(){d&&0<d.length&&("string"===typeof d?(hasStringSupport=!0,_executeCommandFromItems(d.split("||"))):(hasStringSupport=!1,_executeCommandFromItems(d)));return!1}var c=a?a:event;logger.debug("received cross-window message: ",{data:c.data,origin:c.origin});!targetOrigin&&trustedDomain&&(targetOrigin=c.origin);if(c.source===window)window.console&&window.console.error("Source window is equal to current window, command won't be executed.");else{var d=c.data;void 0===trustedDomain?
validateDomain(c.origin,function(a,d){trustedDomain=a;targetOrigin=d;a?b():logger.log("not executing command: untrusted domain origin: "+c.origin)}):trustedDomain&&targetOrigin===c.origin?b():logger.log("not executing command: untrusted domain origin: "+c.origin)}}
function parseCommand(){var a=window.name;window.pIntervalId&&("undefined"!==typeof window.pIntervalCnt&&10<window.pIntervalCnt++||a&&0<a.length)&&clearInterval(window.pIntervalId);if(a&&0<a.length&&"_none"!=a&&(a=a.replace(previousCommand,""),0<a.length)){previousCommand=a;for(var a=a.split("&&"),b=0;b<a.length;b++)a[b]&&0<a[b].length&&_executeCommandFromItems(a[b].split("||"))}}
function setChatActiveFlag(a,b,c,d){caUnloadController&&caUnloadController.set(b);PersistentStorage.getInstance().setItem(a,b,c,d,function(){setSessionChatActiveFlagPS(b)})}function getChatActiveFlag(a,b){if("function"!==typeof b)throw Error("Callback is required parameter for getChatActiveFlag function");PersistentStorage.getInstance().getItem(a,function(a){a=parseInt(a);isNaN(a)&&(a=0);b(a)})}
function setSessionChatActiveFlagPS(a){if("undefined"===typeof a||isNaN(a))logger.log("In setSessionChatActiveFlagPS(); requires one argument as a number");else try{PersistentStorage.isLocalStorageUsed()&&sessionStorage.setItem("sinqCA",a)}catch(b){logger.log("Error while set sinqCA",b)}}function checkSameProtocolOrigin(a){return-1===a.indexOf(window.location.protocol)?a.replace(/^http:/i,window.location.protocol):a}
function pepareResponseData(a,b){var c=[];"unknown"!=typeof b.status?(c[0]=a,c[1]=b.responseText,c[2]=b.status,c[3]=b.getResponseHeader("Cache-Control")||"",c[4]=b.getResponseHeader("Content-Type")||""):c=[a,"","","",""];return c}function doAbortCommand(a){"undefined"===typeof window.v3Lander&&(a=a[1],xHRsInProgress&&xHRsInProgress[a]&&xHRsInProgress[a].abort())}
function doPostChatCommand(a){if("undefined"===typeof window.v3Lander){var b=a[1],c=a[3],d=a[4],e=a[5],f=parseInt(a[6])||0;a=a[7];try{var g=getXMLHttpRequest();xHRsInProgress[b]=g;g.open(e?"POST":"GET",d,!0);void 0!=g.timeout?g.timeout=f:xhrTimeoutController[b]=setTimeoutXHR(f,b,xHRsInProgress);g.onreadystatechange=function(){4==g.readyState&&(xhrTimeoutController[b]&&(clearTimeout(xhrTimeoutController[b]),delete xhrTimeoutController[b]),delete xHRsInProgress[b],doCommandsInClientDomain(pepareResponseData(b,
g),c,b))};a&&g.setRequestHeader("X-Protection-Id",encodeURIComponent(a));e?(g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.send(decodeURIComponent(e))):g.send()}catch(h){handleError(b,h)}}}function doSCBR3PMCommand(a){var b,c=a[1],d=a[2],e=a[3];try{var f=a[4],g=a[5];PersistentStorage.getInstance(a[6]).setItem(f+"_"+d,g,a[7],a[8]);b={action:"3rdPCQ"};doCommandsInClientDomain(JSON.stringify(b),e,c)}catch(h){handleError(c,h)}}
function doGCBR3Command(a){var b="",c=a[1],d=a[2],e=a[3];if(a=PersistentStorage.getInstance())try{d?a.getItem(d,function(a){b=d+"="+a;doCommandsInClientDomain(b,e,c)}):getAllData(function(a){""===a&&(a="inqPc=1");b=a;doCommandsInClientDomain(b,e,c)})}catch(f){handleError(c,f)}else doCommandsInClientDomain("no-cookie",e,c)}
function doCommitPointCommand(a){var b,c=a[1],d=a[2],e=a[3];a=PersistentStorage.getInstance();try{a.getItem("inqVital_"+d,function(a){a=unescape(a);var d=/\bvcnt:([0-9]+)/.exec(a);d||(d=/\bvcnt":([0-9]+)/.exec(a));b={action:"W3rdCC",resp:2==d.length?d[1]:0};doCommandsInClientDomain(JSON.stringify(b),e,c)})}catch(f){handleError(c,f)}}
function doDumpCommand(a){if("undefined"===typeof window.v3Lander){var b=a[1],c=a[3];try{var d=decodeURIComponent(a[4]),e="_rand="+Math.round(0xe8d4a51001*Math.random()).toString(36)+"&level=info&line=document.cookie: "+encodeURIComponent("REMOVED FROM LOG FOR SECURITY REASONS"),f=getXMLHttpRequest();xHRsInProgress[b]=f;f.open("POST",d,!0);f.onreadystatechange=function(){4==f.readyState&&(delete xHRsInProgress[b],doCommandsInClientDomain("",c,b))};f.setRequestHeader("Content-type","application/x-www-form-urlencoded");
f.send(e)}catch(g){handleError(b,g)}}}
function doPOSTBR30Command(a){var b=a[1],c=a[3];try{var d=decodeURIComponent(a[4]),e=d.indexOf("?"),f=d.substring(0,e),f=checkSameProtocolOrigin(f),g=d.substring(e+1),h=getXMLHttpRequest();xHRsInProgress[b]=h;h.open("POST",f,!0);h.onreadystatechange=function(){4==h.readyState&&(delete xHRsInProgress[b],doCommandsInClientDomain(pepareResponseData(b,h),c,b))};var k;try{k=JSON.parse(a[5])}catch(l){}if(k&&"object"===typeof k)for(var m in k)h.setRequestHeader(m,k[m]);h.setRequestHeader("Content-type",
"application/x-www-form-urlencoded");h.send(g)}catch(l){handleError(b,l)}}
function doPOSTJSONCommand(a){var b=a[1],c=a[3];try{var d=decodeURIComponent(a[4]),e=d.indexOf("?"),f=d.substring(0,e),f=checkSameProtocolOrigin(f),g=d.substring(e+1),h=getXMLHttpRequest();xHRsInProgress[b]=h;h.open("POST",f,!0);h.onreadystatechange=function(){4==h.readyState&&(delete xHRsInProgress[b],doCommandsInClientDomain(pepareResponseData(b,h),c,b))};h.setRequestHeader("Content-type","application/json;charset=UTF-8");h.send(g)}catch(k){handleError(b,k)}}
function doCobrowseCommand(a){if("undefined"===typeof window.v3Lander){var b,c=a[0],d=a[1],e=a[3],f=a[4];6<a.length?(a.splice(0,5),b=a.join("||")):b=a[5];try{var g=getXMLHttpRequest();xHRsInProgress[d]=g;g.open("POST",f,!0);g.onreadystatechange=function(){4==g.readyState&&(delete xHRsInProgress[d],b={resp:encodeURIComponent(g.responseText),id:d,action:"ack"},doCommandsInClientDomain(JSON.stringify(b),e,d))};g.setRequestHeader("Content-type","application/octet-stream");g.send(b)}catch(h){a="Response: "+
c+", Id: "+d+'", Log: "'+catchJsFormatter(h,c),handleError(d,a)}}}
function doCBAUTHCommand(a){var b,c=a[0],d=a[1],e=a[2],f=a[3],g=PersistentStorage.getInstance();try{var h=COOKIE_COBROWSE,k=parseInt(a[5]);if(isNaN(k))logger.log("Wrong value for cbAuth cookie");else{var m=a[7],l=a[8];g.setItem(h+"_"+e,JSON.stringify({auth:k}),m,l,function(){g.getItem(h+"_"+e,function(a){b={resp:a,id:d,action:"auth"};doCommandsInClientDomain(JSON.stringify(b),f,d)})})}}catch(p){a="Response: "+c+", Id: "+d+'", Log: "'+catchJsFormatter(p,c),handleError(d,a)}}
function doCBCheckCommand(a){var b,c=a[0],d=a[1],e=a[2],f=a[3];a=PersistentStorage.getInstance();try{a.getItem("cobrowse_"+e,function(a){b={resp:a,id:d,action:"auth"};doCommandsInClientDomain(JSON.stringify(b),f,d)})}catch(g){c="Response: "+c+", Id: "+d+'", Log: "'+catchJsFormatter(g,c),handleError(d,c)}}
function doChatActiveCommand(a){var b=PersistentStorage.getInstance();try{var c=a[2],d=parseStringToBoolean(a[3]),e=1E3*parseInt(a[4]),f=a[5],g="inqCA_"+c;a=d?2:1;setChatActiveFlag(g,a,"",f);caUnloadController||(caUnloadController=new UnloadController(function(a){getChatActiveFlag(g,function(a){var d=caUnloadController.get();0!=d&&a==d&&(setChatActiveFlag(g,0,"",f),b.setItem("inqLT_"+c,""+(new Date).getTime(),e,f,function(){b.onUnload()}))})},null,a));caUnloadController.activate()}catch(h){}}
function chatDeactivate(a){var b=a[1],c=a[3];a="inqCA_"+a[2];caUnloadController&&caUnloadController.deactivate();if("UNLOAD_HANDLER"!==b)try{setChatActiveFlag(a,0,"",c)}catch(d){}}
function doBeaconCommand(a){function b(a,b,c){beaconUnloadController.activate();beaconUnloadController.set(a);beaconUnloadController.url=b;beaconUnloadController.complete=c}if("undefined"===typeof window.v3Lander){var c=a[1];beaconUnloadController||(beaconUnloadController=new UnloadController(function(a){beaconUnloadController.complete||(a=beaconUnloadController.url,a+="&timestamp="+(new Date).getTime(),sendBeacon(a,beaconUnloadController.get()),beaconUnloadController.complete=!0)}));"ACTIVATE"==
c?b(a[2],a[3],!1):"DEACTIVATE"==c?beaconUnloadController.deactivate():c&&-1<c.indexOf("activeWindowUnload")?b(a[5],a[4],!1):"DATA"==c&&beaconUnloadController.set(a[2])}}
function doCommands(a){var b=a[0];switch(b){case "ONLOAD":doOnloadCommand(a);break;case "ABORT":doAbortCommand(a);break;case "POSTCHAT":doPostChatCommand(a);break;case "SCBR3_PM":doSCBR3PMCommand(a);break;case "GCBR3":doGCBR3Command(a);break;case "COMMITPOINT":doCommitPointCommand(a);break;case "DUMP":doDumpCommand(a);break;case "POSTBR30":doPOSTBR30Command(a);break;case "POSTJSON":doPOSTJSONCommand(a);break;case "COBROWSE":doCobrowseCommand(a);break;case "CBAUTH":doCBAUTHCommand(a);break;case "CBCHECK":doCBCheckCommand(a);
break;case "CHATACTIVE":doChatActiveCommand(a);break;case "CHATDEACTIVATE":chatDeactivate(a);break;case "BEACON":doBeaconCommand(a);break;case "POSTSYNC":doPostSyncCommand(a);break;case "CLEARSTORAGE":doClearStorageCommand(a);break;default:if(3<a.length){a=a[1];b=Error("Undefined Request for ["+b+"] command");try{throw b.name="Syntax Error",b;}catch(c){handleError(a,c)}}}}
function doOnloadCommand(a){(a=a[1])?(a.rootDomainsList&&assignCookieRootDomains(a.rootDomainsList),a.id?doCommandsInClientDomain([a.id]):doCommandsInClientDomain([location.protocol+"//"+location.host]),logger.setEnabled(!1===a.JSLoggingDisabled)):doCommandsInClientDomain([location.protocol+"//"+location.host])}
function doPostSyncCommand(a){var b=a[1],c=a[3];try{var d=decodeURIComponent(a[4]),e=d.indexOf("?"),f=d.substring(0,e),f=checkSameProtocolOrigin(f),g=d.substring(e+1),h=getXMLHttpRequest();xHRsInProgress[b]=h;h.open("POST",f,!1);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");var k;try{k=JSON.parse(a[5])}catch(l){}if(k&&"object"===typeof k)for(var m in k)h.setRequestHeader(m,k[m]);h.send(g);delete xHRsInProgress[b];doCommandsInClientDomain(pepareResponseData(b,h),c,b)}catch(l){handleError(b,
l)}}function getAllData(a){if("function"!==typeof a)throw Error("Callback is required parameter for getAllData function");var b=PersistentStorage.getInstance("cookie"),c=b.getAllCookies().concat("; "),b=PersistentStorage.getInstance("localStorage"),c=c+b.getAllCookies(),b=PersistentStorage.getInstance("sessionStorage"),c=c+b.getAllCookies();a(c)}
function clearAllData(){var a=PersistentStorage.getInstance("cookie");a.clear();a=PersistentStorage.getInstance("localStorage");a.clear();a=PersistentStorage.getInstance("sessionStorage");a.clear()}function doClearStorageCommand(){PersistentStorage.isLocalStorageUsed()&&PersistentStorage.getInstance("cookie").cleanNuanceCookies()}whenLoaded();function toJsString(a,b){if("string"==typeof a){var c;c=a.split("\\").join("\\\\");c=c.split('"').join('\\"');c=c.split("'").join("\\'");c=c.split("\n").join("\\n");c=c.split("\r").join("\\r");c=c.split("\t").join("\\t");b&&(c=b+c+b);return c}return a}function parseUrl(a){return"function"===typeof URL?new URL(a):customParseUrl(a)}
function customParseUrl(a){var b=a.match(/^(https?:)\/\/([^\/:]+)(:?(\d*))/),c=b[1],d=b[2],b=b[4]?b[4]:"",e=c+"//"+d;""===b||"80"===b&&"http:"===c||"443"===b&&"https:"===c||(e+=":"+b);return{origin:e,href:a,protocol:c,hostname:d,port:b}}
function getStackTrace(a){try{var b=[];if(arguments&&arguments.callee&&arguments.callee.caller){for(var c=arguments.callee.caller.caller;c&&!(32<b.length);){var d=""+c.toString(),e=d.indexOf("function ")+9,f=d.indexOf("(",e),g=d.substring(e,f)||"anonymous function",h="";if(c.arguments.length)for(var k=0;k<c.arguments.length;k++)h+=(0!=h.length?",":"")+formatArgument(c.arguments[k]);b.push(g+"("+h+")");c=c.caller}return"stack trace:\n\t\t"+b.join("\n\t\t")}return""}catch(m){return""}}
function formatArgument(a){try{var b="[unknown]";try{b="object"==typeof a?null!=a.constructor?a.constructor.toString():""+a:"("+typeof a+")"}catch(d){b=""+a}-1!=b.indexOf("function")&&(b=b.split("\n").join(" ").replace(/^\s*function (\w+)\s*\(\)[^\n]*/g,"[object $1]"));if("(boolean)"==b||"[object Boolean]"==b)b=a?"true":"false";if("(string)"==b||"[object String]"==b)b=toJsString(a,'"');"(number)"==b&&(b=""+a);if("(array)"==b||"[object Array]"==b){for(var b="",c=0;c<a.length&&!(b+=(0!=b.length?",":
"")+formatArgument(a[c]),128<b.length);c++);128<b.length&&(b=b.substr(0,125)+"...");return"["+b+"]"}return b}catch(d){return"[argument]"}};function getXMLHttpRequest(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw Error("Impossible to create XMLHttpRequest object.");}function setTimeoutXHR(a,b,c){if(0<a&&c)return setTimeout(function(){c[b]&&c[b].abort()},a)}function catchJsFormatter(a,b){try{var c="\tERROR while processing "+b+": "+a.name+" - "+a.message,c=c+("\n\t"+getStackTrace(a));return toJsString(c)}catch(d){return""}}
function parseStringToBoolean(a){return"string"==typeof a?"true"==a:a}function _addEventListener(a,b,c,d){d||(d=!1);window.addEventListener?a.addEventListener(b,c,d):window.attachEvent&&a.attachEvent("on"+b,c)}function sendBeacon(a,b){navigator.sendBeacon?navigator.sendBeacon(a,b):sendBeaconByXHR(a,b)}function sendBeaconByXHR(a,b){var c=getXMLHttpRequest();c.open("POST",a,!1);c.setRequestHeader("Content-Type","text/plain;charset=UTF-8");c.send(b)}function getLocation(){return window.location};function UnloadController(a,b,c){this.active=!1;this.handler=a;this._value=c||null;if(b)for(var d in b)this[d]=b[d]}UnloadController.prototype.activate=function(){if(!this.onunload){this.onunload=function(a){this.isActive()&&(this.handler(a),this.deactivate())};var a=this;this._addUnloadHandler(function(b){b=b||window.event;a.onunload(b)})}this.active=!0};UnloadController.prototype.deactivate=function(){this.active=!1};UnloadController.prototype.isActive=function(){return this.active};
UnloadController.prototype.set=function(a){this._value=a};UnloadController.prototype.get=function(){return this._value};UnloadController.prototype._addUnloadHandler=function(a,b){_addEventListener(window,"unload",a,b);_addEventListener(window,"beforeunload",a,b);_addEventListener(window,"pagehide",a,b)};
